# 中期报告

<div align="center">陈哲恺</div>

## 01 项目认知

我本身对于diffusion model有一定了解，在暑假这段时间也进行了一些lora相关的学习和实验，所以对整个项目流程还是比较清晰的。

我对于这个项目的理解就是，首先使用一个base model作为基础模型，然后在这个基础模型上，使用人脸数据训练一个face lora，用于保证生成图片的id，在训练完这个lora之后，将这个lora与style lora进行组合，通过pipeline产出图片。在产出了原始图片之后，再使用训练数据的face进行修正和增强，最终达到高质量的生成，在保持人物id的同时实现风格的融合

在我一开始接触到这个项目的时候，受到我暑假做的事的影响，我最先想到的是将lora的训练过程换为更强的edlora，从而提升lora的表现能力。但是后来在稍微了解了整个项目之后，我认为lora转换为edlora的工程量实在太大，而且需要一些额外的适配，所以暂时放弃了这个实现，只是作为一种思路保留。

关于任务，其实我一开始不太理解任务要做什么，因为我觉得那只是个寻找适配的style lora并调参的工作，感觉工作量有点小了。所以我转向了一种更具有普适性的思路，也就是TODO list中的lora的即插即用，这是一个同时涉及到后端处理和前端lora搭建的工作，感觉相对而言工作量比较适合。在这之上，我又产生了一些其他关于ui修改和功能实现的思路，具体可以查看小组报告中的内容。



## 02 当前进度

当前已经完成了自己最开始的一些想法，对lora的即插即用、生成图片历史的保存和查看都完成了切实可用的实现。目前正在做的是对于controlnet中openpose控制的部分进行修改，已经完成了对openpose结果的实时查看，使得用户可以实时观察当前正在使用的keypose的模样。本来是想做进一步的处理，允许用户直接编辑openpose以增加可玩性的，但是后来在参考了已有的实现之后，感觉这个功能的体量可能会有点大，实现起来可能需要非常多的时间，所以暂时先搁置了这个想法。



## 03 未来计划

目前正在探索更多可以进行开发和补充的地方，暂时还没有明确的未来计划，所有我认为急需的功能已经基本完成了，剩下的可能更多的是一些功能的拓展。目前我认为接下来的工作可能在以下三个方面：

- 现有项目bug的修复
- ui的优化
- 更多功能的开发

我会在使用中进一步探索这三方面的工作



## 04 总结

综上，我并没有按照任务要求去进行新风格的适配（在完成lora即插即用时进行了尝试但并没有细致的调整），但是我为项目进行了一些contribution并且已经被merge到主分支。不过我们小组是为项目贡献了新风格的适配的，我其实不太确定脱离任务要求这样是否是可以的，也希望老师能给出一些建议

不过我认为我做的事情是比新风格的适配更加重要的和有意义的，这些普适性的工作我觉得才是目前facechain这个项目需要的
